<div class="hcs-container" style="height: 100%">
    <div class="hcs-container" style="height: 100%" ng-if="display.master">
    <page-sidebar on-add="$parent.onAdd" 
                  on-edit="$parent.onEdit" 
                  on-delete="$parent.onDelete" 
                  on-save="$parent.onSave" 
                  on-import="$parent.onImport" 
                  on-export="$parent.onExport"
                  on-search-press="$parent.onSearch"
                  source="$parent.mapName" 
                  key-field="function_id" 
                  display-field="default_name" 
                  icon-field="icon" 
                  selected-key="$parent.selectedFunction"
                  reload-on-change="true"
                  advanced-search="$parent.advancedSearch">
        <site-map>
            <a><span>{{$root.currentFunction.default_name}}</span></a>
            <span><i class="bowtie-icon bowtie-chevron-right"></i></span>
            <span>{{currentFunction.default_name}}</span>
            <a href="#dropdownFunction" style="color:#333" data-toggle="collapse"><i class="bowtie-icon bowtie-chevron-down"></i></a>
            <div id="dropdownFunction" class="dropdown-content">
                <div class="filter">
                    <input-text-icon ng-model="search" style="padding:3px;">
                </div>
                <div class="dropdown">
                    <p ng-repeat="f in mapName | filter : search" ng-class="{focus : selectedFunction === f.function_id}" ng-click="selectFunc($event, f.function_id)">{{f.custom_name ? f.default_name : f.custom_name}}</p>
                </div>
            </div>
        </site-map>
        <advanced-search>
            <div class="col-xs-3">
                <input-select data-list="cbbSysLock" ng-model="advancedSearch.data_lock"
                                    placeholder="" 
                                    data-value="value" 
                                    data-caption="caption"/>
            </div>
        </advanced-search>
        <content>
            <div c-template url="${get_app_url('')}/pages/{{$partialpage}}" 
                 style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"></div>
        </content>
    </page-sidebar>
</div>
<div class="hcs-container" style="height: 100%" ng-if="display.detail">
    <page-sidebar on-add="$parent.detail.onAdd" 
                  on-edit="$parent.detail.onEdit" 
                  on-delete="$parent.detail.onDelete" 
                  on-save="$parent.detail.onSave" 
                  on-import="$parent.detail.onImport" 
                  on-export="$parent.detail.onExport"
                  on-search-press="$parent.detail.onSearch"
                  source="$parent.detail.mapName" 
                  key-field="function_id" 
                  display-field="default_name" 
                  icon-field="icon" 
                  selected-key="$parent.detail.selectedFunction"
                  reload-on-change="true"
                  advanced-search="$parent.detail.advancedSearch">
        <site-map>
            <a ng-click="masterPage()"><span>{{$root.currentFunction.default_name}}</span></a>
            <span><i class="bowtie-icon bowtie-chevron-right"></i></span>
            <span>(${get_global_res('group', 'Nhóm')} {{detail.$gjw_name}}</span>
            <span><i class="bowtie-icon bowtie-chevron-right"></i></span>
            <span>${get_res('job_w_name', 'Tên chức danh')} {{detail.$job_w_name}})</span>
            <span><i class="bowtie-icon bowtie-chevron-right"></i></span>
            <span>{{detail.currentFunction.default_name}}</span>
            <a data-target="#dropdownFunction" style="color:#333" data-toggle="collapse"><i class="bowtie-icon bowtie-chevron-down"></i></a>
            <div id="dropdownFunction" class="dropdown-content">
                <div class="filter">
                    <input-text-icon ng-model="$parent.$parent.detail.search" style="padding:3px;">
                </div>
                <div class="dropdown">
                    <p ng-repeat="f in $parent.$parent.detail.mapName | filter : $parent.$parent.detail.search" ng-class="{focus : $parent.detail.selectedFunction === f.function_id}" ng-click="$parent.detail.selectFunc($event, f.function_id)">{{f.custom_name ? f.default_name : f.custom_name}}</p>
                </div>
            </div>
        </site-map>
        <!--on-search-change="onSearch"-->
        <content>
            <div c-template url="${get_app_url('')}/pages/{{detail.$partialpage}}" 
                 style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"></div>
        </content>
    </page-sidebar>
</div>
</div>
<script>
    <%include file="../scripts/jobworkingpanel.js"/>
</script>
